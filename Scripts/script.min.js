const appContainer=document.getElementById("app-container"),navList=document.getElementById("main-nav-list");function loadContent(t){const e="undefined"!=typeof Templates&&Templates[t]?Templates[t]:null;e?(appContainer.innerHTML=e,history.pushState({route:t},"",`#${t}`),updateActiveLink(t),"cadastro"===t&&attachFormValidation()):appContainer.innerHTML="<main><h2>Página não encontrada!</h2></main>"}function updateActiveLink(t){navList.querySelectorAll("a[data-route]").forEach((e=>{e.dataset.route===t?e.classList.add("active"):e.classList.remove("active")}))}document.addEventListener("click",(t=>{const e=t.target.closest("a[data-route]");if(e){t.preventDefault();loadContent(e.dataset.route)}})),window.addEventListener("popstate",(t=>{t.state&&t.state.route&&loadContent(t.state.route)}));const validationRules={required:t=>""!==t.trim(),email:t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),cpf:t=>/^\d{3}\.\d{3}\.\d{3}-\d{2}$/.test(t),cep:t=>/^\d{5}-\d{3}$/.test(t)};function attachFormValidation(){const t=document.getElementById("cadastro-form");if(!t)return;let e=document.getElementById("validation-message");if(!e){const a='\n            <div class="alert alert-error" id="validation-message" style="display:none;">\n                **Aviso:** Por favor, corrija os erros nos campos marcados antes de enviar.\n            </div>\n        ';t.insertAdjacentHTML("beforebegin",a),e=document.getElementById("validation-message")}t.addEventListener("submit",(function(a){a.preventDefault();const n=t.querySelectorAll("input[data-validation]");let i=!0;n.forEach((t=>{validateInput(t)||(i=!1)})),i?(e.style.display="none",alert("✅ Cadastro enviado com sucesso! (Simulação)"),t.reset()):(e.style.display="block",e.scrollIntoView({behavior:"smooth"}))})),t.addEventListener("blur",(function(t){t.target.matches("input[data-validation]")&&validateInput(t.target)}),!0)}function validateInput(t){const e=t.dataset.validation||(t.required?"required":"");if(!e)return!0;const a=e.split(/\s*,\s*/);let n=!0;return a.forEach((e=>{validationRules[e]&&!validationRules[e](t.value)&&(n=!1)})),n?(t.classList.remove("is-invalid"),t.classList.add("is-valid")):(t.classList.remove("is-valid"),t.classList.add("is-invalid")),n}function setupThemeToggle(){const t=document.getElementById("theme-toggle"),e=window.matchMedia("(prefers-color-scheme: dark)");function a(t){"dark"===t?(document.body.classList.add("dark-mode"),localStorage.setItem("theme","dark")):(document.body.classList.remove("dark-mode"),localStorage.setItem("theme","light"))}const n=localStorage.getItem("theme");n?a(n):e.matches?a("dark"):a("light"),t.addEventListener("click",(()=>{a("light"===(document.body.classList.contains("dark-mode")?"dark":"light")?"dark":"light")}))}function initializeSPA(){setupThemeToggle();loadContent(window.location.hash.substring(1)||"inicio")}document.addEventListener("DOMContentLoaded",initializeSPA);